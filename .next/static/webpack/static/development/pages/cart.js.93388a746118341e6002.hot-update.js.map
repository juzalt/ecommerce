{"version":3,"file":"static/webpack/static/development/pages/cart.js.93388a746118341e6002.hot-update.js","sources":["webpack:///./components/discount.js"],"sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux'\nimport { setDiscount, setFinalPrice } from '../store';\n\n\nclass Discount extends React.Component {\n  constructor(props){\n    super(props)\n\n    this.state = {\n      input: \"\",\n      validationCode: false,\n      validationCodeMessage: \"\",\n      discountPercentage: 0,\n      final_price: 0,\n      amount_discounted: 0\n    }\n  }\n\n  handleChange(e){\n    this.setState({\n      input: e.target.value\n    })\n  }\n  \n  handleClick() {\n    const discountPercentage = this.state.discountPercentage;\n    const basePrice = this.props.basePrice;\n    const {dispatch} = this.props\n    console.log(basePrice, \"basePrice\");\n    switch (this.state.input) {\n      case \"courseit2019\":\n        this.setState({\n          validationCodeMessage: \"Código aplicado!\",\n          validationCode: true,\n          discountPercentage: 10,\n          amount_discounted: discountPercentage * basePrice / 100,\n          final_price: basePrice - this.state.amount_discounted\n        }, () => {dispatch(setDiscount(this.state.discountPercentage), dispatch(setFinalPrice(this.state.final_price)), console.log(this.state, \"whole state\"))})\n        break;\n      case \"\":\n        this.setState({\n          validationCodeMessage: \"Debes escribir un código\",\n          validationCode: false\n        })\n        break;\n      default:\n        this.setState({\n          validationCodeMessage: \"Código inválido\",\n          validationCode: false\n        })\n        break;\n    }\n  }\n\n  render(){\n    return(\n      <React.Fragment>\n          <label>\n            <input className=\"couponValidationForm\" type=\"text\" name=\"name\" placeholder=\"Código de descuento\" onChange={(e) => this.handleChange(e)} />\n          </label>\n          <button className=\"button\" title=\"Aplicar\" onClick={(e) => this.handleClick(e)} />\n          <p>{this.state.validationCodeMessage}</p>\n        <style jsx>\n        {`\n          .button{\n            width: 5em;\n            height: 4em;\n            color: beige;\n            font-weight: bold;\n            background-color: #157be4;\n            border-color: #157be4;\n            border-width: 0;\n          }\n          .couponValidationForm{\n            height: 4em;\n            border-width: 1px;\n            padding: 0 0 0 1em;\n          }\n        `}\n       </style>\n      </React.Fragment>\n    )\n  }\n}\n\nfunction mapStateToProps(state){\n  return {\n    basePrice: state.productCart.base_price\n  }\n}\n\nexport default connect(mapStateToProps)(Discount);"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAHA;AAWA;AACA;;;AACA;AACA;AACA;AADA;AAGA;;;AAEA;AAAA;AACA;AAAA;AACA;AAFA;AAIA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAMA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AArBA;AAuBA;;;AAEA;AAAA;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AALA;AAAA;AA0BA;;;;AA9EA;AACA;AAgFA;AACA;AACA;AADA;AAGA;AACA;AACA;;;;A","sourceRoot":""}